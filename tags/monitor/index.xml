<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Monitor on 小熊猫快站起来</title>
    <link>https://suikaremilia.github.io/tags/monitor/</link>
    <description>Recent content in Monitor on 小熊猫快站起来</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 02 Mar 2020 15:13:58 +0000</lastBuildDate><atom:link href="https://suikaremilia.github.io/tags/monitor/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>CEPH Nautilus Zabbix module Setup</title>
      <link>https://suikaremilia.github.io/post/ceph-nautilus-zabbix-module-setup/</link>
      <pubDate>Mon, 02 Mar 2020 15:13:58 +0000</pubDate>
      
      <guid>https://suikaremilia.github.io/post/ceph-nautilus-zabbix-module-setup/</guid>
      <description>CEPH可以通过mgr节点的zabbix模块实现监控
不同于普通的agent模式，CEPH自带的zabbix模块通过trapper模式工作，mgr节点收集集群信息并向Zabbix Server发送。
1、环境说明： 3节点CEPH集群，每个node都是mgr节点;
部署Nautilus 14.2.7；
Zabbix Server版本：4.2.1
2、安装部署： 在所有mgr节点上安装zabbix-sender
配置yum：
# rpm -Uvh https://repo.zabbix.com/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm 安装sender：
# yum install zabbix-sender -y 3、配置zabbix模块： 在任意一个mgr节点上执行如下配置：
启用zabbix module：
# ceph mgr module enable zabbix 指定zabbix server，如果有多个可以用&amp;quot;,&amp;ldquo;隔开，并且可以添加&amp;rdquo;:&amp;ldquo;来指定服务器端口，此处只有最简单的配置：
# ceph zabbix config-set zabbix_host zabbix.test.com 指定zabbix_sender的位置：
# which zabbix_sender /usr/bin/zabbix_sender # ceph zabbix config-set zabbix_sender /usr/bin/zabbix_sender Configuration option zabbix_sender updated 指定identifier，这里很奇怪，只能是某个mgr节点的主机名，其他的可以设置成功但是发送失败，不知道我哪里配的有问题：
# ceph zabbix config-set identifier &amp;#34;ceph01.test.com&amp;#34; 后面如果有需要可以定义server的端口等，命令跟前面的相仿，这里就不配了。
查看一下当前的配置：
# ceph zabbix config-show 查看一下自带的监控模板，后面会用到：
# find / -iname zabbix_template.</description>
    </item>
    
  </channel>
</rss>
